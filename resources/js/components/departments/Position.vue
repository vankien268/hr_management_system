<template>
    <div class="max-w-3xl mx-auto p-6 bg-white rounded-xl shadow">
        <h2 class="text-xl font-bold mb-4">Th√™m / S·ª≠a Ph√≤ng Ban</h2>

        <!-- Form Ph√≤ng Ban -->
        <div class="space-y-4">
            <div>
                <label class="block font-medium">T√™n ph√≤ng ban <span class="text-red-500">*</span></label>
                <input v-model="form.department_name" type="text" class="form-input w-full" placeholder="VD: Ph√≤ng Kinh Doanh" />
            </div>

            <div>
                <label class="block font-medium">M√¥ t·∫£</label>
                <textarea v-model="form.description" class="form-textarea w-full" rows="3" placeholder="M√¥ t·∫£ ch·ª©c nƒÉng c·ªßa ph√≤ng ban..."></textarea>
            </div>
        </div>

        <!-- Danh s√°ch ch·ª©c v·ª• -->
        <div class="mt-6">
            <h3 class="text-lg font-semibold mb-2">Ch·ª©c v·ª• thu·ªôc ph√≤ng ban</h3>

            <div v-for="(position, index) in form.positions" :key="index" class="flex items-center space-x-2 mb-2">
                <input
                    v-model="position.title"
                    type="text"
                    class="form-input w-full"
                    placeholder="T√™n ch·ª©c v·ª•"
                />
                <button
                    @click="removePosition(index)"
                    type="button"
                    class="text-red-500 hover:text-red-700"
                    title="Xo√° ch·ª©c v·ª•"
                >
                    üóëÔ∏è
                </button>
            </div>

            <button @click="addPosition" type="button" class="mt-2 text-sm text-blue-600 hover:underline">
                ‚ûï Th√™m ch·ª©c v·ª•
            </button>
        </div>

        <!-- N√∫t l∆∞u -->
        <div class="mt-6">
            <button @click="submitForm" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                üíæ L∆∞u ph√≤ng ban
            </button>
        </div>
    </div>
</template>

<script setup>
    import { reactive } from 'vue'

    const form = reactive({
        department_name: '',
        description: '',
        positions: [
            { title: '' }
        ]
    })

    const addPosition = () => {
        form.positions.push({ title: '' })
    }

    const removePosition = (index) => {
        form.positions.splice(index, 1)
    }

    const submitForm = () => {
        // B·∫°n c√≥ th·ªÉ g·ª≠i form b·∫±ng axios/fetch v·ªÅ backend Laravel
        console.log('D·ªØ li·ªáu g·ª≠i ƒëi:', form)
    }
</script>

<style scoped>
    .form-input,
    .form-textarea {
        @apply border border-gray-300 rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500;
    }
</style>
<?php
